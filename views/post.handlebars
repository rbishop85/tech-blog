<main class="container pb-5">

  <div class="row d-flex justify-content-center my-5">
    <div class="card bg-dark col-11 col-lg-9">
      <article class="bg-light">
        <header class="mb-4">
          <div class="py-3 bg-dark"></div>
          <!-- Post title-->
          <div class="mx-3">
            <h1 class="fw-bolder mb-1">{{title}}</h1>
            <div class="text-muted fst-italic">
              <span>Published
                {{format_date createdAt}}
                by
                {{capitalize user.username}}</span>
            </div>
            <div class="text-muted fst-italic">
              <span>Last updated {{format_date updatedAt}}</span>
            </div>
            <hr class="my-1" />
          </div>
        </header>
        <!-- Post content-->
        <section class="mb-5 mx-3">
          <pre class="card-text">{{content}}</pre>
          <hr class="my-1" />
        </section>
        {{#if logged_in}}
          <div class="mb-3 mx-3">
            <form id="form-newComment">
              <h3 class="mb-3 font-weight-normal">Leave A Comment!</h3>
              <div class="form-group my-3">
                <label for="commentContent" class="visually-hidden">Comment
                  Text:</label>
                <textarea
                  class="form-control"
                  id="commentContent"
                  rows="3"
                  placeholder="Comment Text:"
                  style="resize: none;"
                  required
                ></textarea>
              </div>
              <div class="text-center">
                <button class="btn btn-lg btn-info" data-id="{{id}}" id="addComment" type="submit">Submit Comment</button>
              </div>
            </form>
          </div>
        {{else}}
          <div class="mb-5 mx-3">
            <h3 class="mb-3 font-weight-normal">Log In to Leave A Comment!</h3>
          </div>
        {{/if}}
      </article>
    </div>
  </div>

  {{#if comments.length}}
  <div class="row d-flex justify-content-center my-5">
    <div class="card bg-dark col-11 col-lg-8">
      <article class="bg-light">
        <header class="mb-4">
          <div class="mx-3 text-center">
            <h3 class="fw-bolder mb-1 fst-italic my-3">{{comments.length}}
              Comments:</h3>
            <hr class="my-1" />
          </div>
        </header>
        <section class="mb-5 mx-3">
          {{#each comments as |comment|}}
          <div class="container d-flex justify-content-center my-1">
            <div class="card" style="width: 100%;">
              <div class="card-body">
                <div class="card-title d-flex justify-content-between">
                  <small class="text-muted">By: {{capitalize user.username}}</small>
                  <small class="text-muted">{{format_date created_at}}</small>
                </div>
                <hr class="my-1" />
                <pre class="card-text">{{content}}</pre>
                {{!-- {{#if_eq user_id ../logged_in_user_id}}
                  <small class="text-muted">You wrote this!</small>
                {{/if_eq}} --}}
              </div>
            </div>
          </div>
          {{/each}}
        </section>
      </article>
    </div>
  </div>
  {{/if}}

</main>

{{#if logged_in}}
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
<script src="/js/post.js"></script>
{{/if}}